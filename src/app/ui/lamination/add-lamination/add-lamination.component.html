<div class="add-lamination-parent-container">
    <div class="add-lamination-container">
        <div class="page-header">Add Lamination</div>
        <form (ngSubmit)="onSubmit()" autocomplete="off" [formGroup]="addLaminationFormGroup">
            <div class="lamination-container">
                <mat-form-field appearance="fill">
                    <mat-label>Choose Location</mat-label>
                    <mat-select formControlName="laminationLocationId" placeholder="Select Crossply location" required>
                        <mat-option *ngFor="let location of crossplyLocationList"
                            value="{{location.id}}">{{location.name}}</mat-option>
                    </mat-select>
                </mat-form-field>
                <mat-form-field class="crossply-field-small">
                    <mat-label>Choose Color</mat-label>
                    <mat-select formControlName="laminationColorId" required>
                        <mat-option *ngFor="let color of laminationColorList"
                            value="{{color.id}}">{{color.name}}</mat-option>
                    </mat-select>
                </mat-form-field>
                <mat-form-field class="">
                    <mat-label>Reference Number</mat-label>
                    <input matInput formControlName="laminationReferenceNumber" value="2">
                </mat-form-field>
                <mat-form-field class="extruder-form" appearance="fill">
                    <mat-label>Enter Length</mat-label>
                    <input formControlName="laminationLength" type="number" min="0" max="999999" matInput
                        placeholder="Length" required>
                    <mat-hint>Length in number ex: 322</mat-hint>
                </mat-form-field>
                <mat-form-field class="extruder-form" appearance="fill">
                    <mat-label>Enter Weight</mat-label>
                    <input formControlName="laminationWeight" type="number" min="0" max="999999" matInput
                        placeholder="Weight" required>
                    <mat-hint>Weight in number ex: 200</mat-hint>
                </mat-form-field>
                <mat-form-field class="laminationSubmittedBy">
                    <mat-label>Submitted By</mat-label>
                    <mat-select formControlName="laminationSubmittedBy" required>
                        <mat-option *ngFor="let user of userList" value={{user.id}}>{{user.email}} - {{user.firstname}}
                            {{user.lastname}}</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div class="lamination-comment-container">
                <mat-form-field class="laminationComment">
                    <mat-label>Leave a comment</mat-label>
                    <textarea #comments rows="2" formControlName="laminationComment" matInput
                        placeholder="..."></textarea>
                    <mat-hint align="end">{{comments.value.length}}/500</mat-hint>
                </mat-form-field>
            </div>
            <div class="add-extruder-crossply-buttons">
                <button type="button" mat-raised-button color="accent" (click)="addExtruder()">Add Extruder (max of
                    3)</button>
                <button type="button" mat-raised-button color="warn" (click)="removeExtruder(0)">Remove
                    Extruder</button>
                <button type="button" mat-raised-button color="primary" (click)="addCrossply()">Add Crossply</button>
                <button type="button" mat-raised-button color="warn" (click)="removeCrossply(0)">Remove
                    Crossply</button>
            </div>
            <div class="child-container-extruder">
                <ng-container formArrayName="extruderList">
                    <div class="child-item" *ngFor="let item of extruderList.controls; let i=index" [formGroupName]="i">
                        <div class="child-container-header mat-elevation-z4">
                            <h1>Extruder Detail - {{i}}</h1>
                        </div>
                        <div class="child-container-detail">
                            <mat-form-field class="crossply-field-small">
                                <mat-label>Color</mat-label>
                                <mat-select formControlName="extruderColorId" required>
                                    <mat-option *ngFor="let color of extruderColorList"
                                        value="{{color.id}}">{{color.name}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                            <mat-form-field class="crossply-field-small">
                                <mat-label>Width</mat-label>
                                <mat-select formControlName="extruderWidthId" required>
                                    <mat-option *ngFor="let width of widthList"
                                        value="{{width.id}}">{{width.name}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                            <mat-form-field class="extruder-form" appearance="fill">
                                <mat-label>Length</mat-label>
                                <input formControlName="extruderLength" type="number" min="0" max="999999" matInput
                                    placeholder="Length" required>
                                <mat-hint>ex: 322</mat-hint>
                            </mat-form-field>
                            <mat-form-field class="extruder-form" appearance="fill">
                                <mat-label>Weight</mat-label>
                                <input formControlName="extruderWeight" type="number" min="0" max="999999" matInput
                                    placeholder="Weight" required>
                                <mat-hint>ex: 200</mat-hint>
                            </mat-form-field>
                            <button class="add-crossply-btn" color="accent" type="button" mat-raised-button
                                (click)="fetchExtruderRollNumber(0)">
                                Fetch Roll Number</button>
                            <mat-form-field class="crossply-field-small">
                                <mat-label>Roll Number</mat-label>
                                <input matInput formControlName="extruderRollNumber" value="2" readonly>
                            </mat-form-field>
                        </div>
                    </div>
                </ng-container>
            </div>
            <div class="child-container-crossply">
                <ng-container formArrayName="crossplyList">
                    <div class="child-item" *ngFor="let item of crossplyList.controls; let i=index" [formGroupName]="i">
                        <div class="child-container-header mat-elevation-z4">
                            <h1>Crossply Detail - {{i}}</h1>
                        </div>
                        <div class="child-container-detail">
                            <mat-form-field class="crossply-field-small">
                                <mat-label>Choose Color</mat-label>
                                <mat-select formControlName="crossplyColorId" required>
                                    <mat-option *ngFor="let color of crossplyColorList"
                                        value="{{color.id}}">{{color.name}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                            <mat-form-field class="crossply-field-small">
                                <mat-label>Choose Width</mat-label>
                                <mat-select formControlName="crossplyWidthId" required>
                                    <mat-option *ngFor="let width of widthList"
                                        value="{{width.id}}">{{width.name}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                            <mat-form-field class="extruder-form" appearance="fill">
                                <mat-label>Enter Length</mat-label>
                                <input formControlName="crossplyLength" type="number" min="0" max="999999" matInput
                                    placeholder="Length" required>
                                <mat-hint>Length in number ex: 322</mat-hint>
                            </mat-form-field>
                            <mat-form-field class="extruder-form" appearance="fill">
                                <mat-label>Enter Weight</mat-label>
                                <input formControlName="crossplyWeight" type="number" min="0" max="999999" matInput
                                    placeholder="Weight" required>
                                <mat-hint>Weight in number ex: 200</mat-hint>
                            </mat-form-field>
                            <button class="add-crossply-btn" color="primary" type="button" mat-raised-button
                                (click)="fetchCrossplyRollNumber(0)">
                                Fetch Crossply Roll Number</button>
                            <mat-form-field class="extruder-roll-number">
                                <mat-label>Roll Number</mat-label>
                                <input matInput formControlName="crossplyRollNumber" value="2" readonly>
                            </mat-form-field>
                        </div>
                    </div>
                </ng-container>
            </div>
            <div class="error-container" *ngIf="showError">
                <h3>Summary of Errors</h3>
                @for(item of errorMessageList; track item){
                <p>{{item}}</p>
                }
            </div>
            <div class="button-container">
                <button type="button" mat-raised-button color="accemt" (click)="clearForm()">Clear Form</button>
                <button class="btn-submit" type="submit" mat-raised-button color="warn">Submit Form</button>
            </div>
        </form>
    </div>
</div>